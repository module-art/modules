!function(e){var n={};function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(i,a,function(n){return e[n]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=6)}({6:function(e,n,t){e.exports=t(7)},7:function(e,n){$(document).ready(function(){var e,n=$("#field-manage-script"),t=parseInt($("#fields-length").text());function i(){$(".remove-field-button").click(function(){r(),$(this).parent().remove(),l()})}function a(){$(".up-button").click(function(){r();var e=$(this).parent();e.prev().before(e),l()})}function o(){$(".down-button").click(function(){r();var e=$(this).parent();e.next().after(e),l()})}function l(){var e=$("#field-manage-script").children("section");e.length-1?$(".remove-field-button").removeClass("d-none"):$(".remove-field-button").addClass("d-none"),e.first().children(".up-button").first().addClass("d-none"),e.last().children(".down-button").first().addClass("d-none")}function r(){$(".up-button").removeClass("d-none"),$(".down-button").removeClass("d-none")}i(),a(),o(),l(),function e(){$("#add-field-button").click(function(){r();var c='<section class="form-row justify-content-end"><div class="form-group col-11 col-md-5"><input type="text" name="champs-'+ ++t+'" class="form-control new" /><small class="invalid-feedback"></small></div><div class="form-group offset-1 col-11 offset-md-0 col-md-6"><div class="form-check"><input class="form-check-input" type="radio" name="type-'+t+'" value="text" checked><label class="form-check-label">Texte</label></div><div class="form-check"><input class="form-check-input" type="radio" name="type-'+t+'" value="date"><label class="form-check-label">Date</label></div><div class="form-check"><input class="form-check-input" type="radio" name="type-'+t+'" value="time"><label class="form-check-label">Heure</label></div><div class="form-check"><input class="form-check-input" type="radio" name="type-'+t+'" value="nb"><label class="form-check-label">Nombre</label></div></div><div class="remove-field-button" id=""><i class="fas fa-minus-circle"></i></div><div class="up-button" id=""><i class="fas fa-arrow-circle-up"></i></div><div class="down-button" id=""><i class="fas fa-arrow-circle-down"></i></div></section>';n.append(c),$("input[name=champs-"+t+"]").focus().blur(function(){var e=[];n.children("section").find(".form-control").each(function(){e.push($(this).val())}),function(e){var n={};for(var t in e.forEach(function(e){n[e]=n[e]?n[e]+=1:1}),n)if(n[t]>=2)return!0;return!1}(e)&&($("input[name=champs-"+t+"]").addClass("is-invalid").next().html("Ce champ existe déjà."),$("button[type=submit]").prop("disabled",!0),$("#add-field-button").off())}),$("input[name=champs-"+t+"]").focus(function(){$(this).removeClass("is-invalid"),$("button[type=submit]").prop("disabled",!1),e()}),i(),a(),o(),l()})}(),$("#the-form").submit(function(e){var t,i={fields:[]};n.children("section").each(function(){var e=$(this).find("input[type=radio]:checked").val(),n=$(this).find(".form-control").first();i.fields.push({name:n.val(),type:e,isNew:!!n.hasClass("new")})}),t=i,$("input[name=champs]").val(JSON.stringify(t))}),$(".field-editor").click(function(){e=$(this).prev(),$("#modalFieldEditor").modal("show"),$("input[name=new-field]").val(e.val()),$("input[name=old-field]").val(e.val()),$("input[name=new-type][value="+$(this).parents("section.form-row").find("input[type=radio]:checked").val()+"]").prop("checked",!0),$("input[name=old-type]").val($(this).parents("section.form-row").find("input[type=radio]:checked").val())}),$("#field-update").click(function(){var n=$("input[name=new-field]").val(),t=$("input[name=old-field]").val(),i=$("input[name=new-type]:checked").val(),a=$("input[name=old-type]").val(),o=$(this);n!=t||i!=a?(o.css("cursor","wait"),$.ajax({method:"put",url:"/coulisses/type-field/"+$("input[name=type_id]").val(),data:{_token:$('[name="csrf-token"]').attr("content"),newField:n,oldField:t,newType:i,oldType:a},dataType:"json"}).done(function(t){o.css("cursor","default"),"error"in t?$("input[name=new-field]").addClass("is-invalid").next().html(t.error):($("input[name=new-field]").removeClass("is-invalid"),e.val(n),e.parents("section").first().find("input[type=radio][value="+i+"]").prop("checked",!0),$("#modalFieldEditor").modal("hide"))}).fail(function(e){o.css("cursor","default")})):$("#modalFieldEditor").modal("hide")})})}});