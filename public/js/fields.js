!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=7)}({7:function(e,t,n){e.exports=n(8)},8:function(e,t){$(document).ready((function(){var e,t=$("#field-manage-script"),n=parseInt($("#fields-length").text());function i(){$(".remove-field-button").click((function(){c(),$(this).parent().remove(),l()}))}function a(){$(".up-button").click((function(){c();var e=$(this).parent();e.prev().before(e),l()}))}function o(){$(".down-button").click((function(){c();var e=$(this).parent();e.next().after(e),l()}))}function l(){var e=$("#field-manage-script").children("section");e.length-1?$(".remove-field-button").removeClass("d-none"):$(".remove-field-button").addClass("d-none"),e.first().children(".up-button").first().addClass("d-none"),e.last().children(".down-button").first().addClass("d-none")}function c(){$(".up-button").removeClass("d-none"),$(".down-button").removeClass("d-none")}i(),a(),o(),l(),function e(){$("#add-field-button").click((function(){c();var r='<section class="form-row justify-content-end"><div class="form-group col-11 col-md-5"><input type="text" name="champs-'+ ++n+'" class="form-control new" /><small class="invalid-feedback"></small></div><div class="form-group offset-1 col-11 offset-md-0 col-md-6"><div class="form-check"><input class="form-check-input" type="radio" name="type-'+n+'" value="text-raw" checked><label class="form-check-label">Texte brut</label></div><div class="form-check"><input class="form-check-input" type="radio" name="type-'+n+'" value="text" checked><label class="form-check-label">Texte</label></div><div class="form-check"><input class="form-check-input" type="radio" name="type-'+n+'" value="date"><label class="form-check-label">Date</label></div><div class="form-check"><input class="form-check-input" type="radio" name="type-'+n+'" value="time"><label class="form-check-label">Heure</label></div><div class="form-check"><input class="form-check-input" type="radio" name="type-'+n+'" value="nb"><label class="form-check-label">Nombre</label></div><div class="form-check"><input class="form-check-input" type="radio" name="type-'+n+'" value="checkbox"><label class="form-check-label">Case à cocher</label></div></div><div class="remove-field-button" id=""><i class="fas fa-minus-circle"></i></div><div class="up-button" id=""><i class="fas fa-arrow-circle-up"></i></div><div class="down-button" id=""><i class="fas fa-arrow-circle-down"></i></div></section>';t.append(r),$("input[name=champs-"+n+"]").focus().blur((function(){var e=[];t.children("section").find(".form-control").each((function(){e.push($(this).val())})),function(e){var t={};for(var n in e.forEach((function(e){t[e]=t[e]?t[e]+=1:1})),t)if(t[n]>=2)return!0;return!1}(e)&&($("input[name=champs-"+n+"]").addClass("is-invalid").next().html("Ce champ existe déjà."),$("button[type=submit]").prop("disabled",!0),$("#add-field-button").off())})),$("input[name=champs-"+n+"]").focus((function(){$(this).removeClass("is-invalid"),$("button[type=submit]").prop("disabled",!1),e()})),i(),a(),o(),l()}))}(),$("#the-form").submit((function(e){var n,i={fields:[]};t.children("section").each((function(){var e=$(this).find("input[type=radio]:checked").val(),t=$(this).find(".form-control").first();i.fields.push({name:t.val(),type:e,isNew:!!t.hasClass("new")})})),n=i,$("input[name=champs]").val(JSON.stringify(n))})),$(".field-editor").click((function(){e=$(this).prev(),$("#modalFieldEditor").modal("show"),$("input[name=new-field]").val(e.val()),$("input[name=old-field]").val(e.val()),$("input[name=new-type][value="+$(this).parents("section.form-row").find("input[type=radio]:checked").val()+"]").prop("checked",!0),$("input[name=old-type]").val($(this).parents("section.form-row").find("input[type=radio]:checked").val())})),$("#field-update").click((function(){var t=$("input[name=new-field]").val(),n=$("input[name=old-field]").val(),i=$("input[name=new-type]:checked").val(),a=$("input[name=old-type]").val(),o=$(this);t!=n||i!=a?(o.css("cursor","wait"),$.ajax({method:"put",url:"/coulisses/type-field/"+$("input[name=type_id]").val(),data:{_token:$('[name="csrf-token"]').attr("content"),newField:t,oldField:n,newType:i,oldType:a},dataType:"json"}).done((function(n){o.css("cursor","default"),"error"in n?$("input[name=new-field]").addClass("is-invalid").next().html(n.error):($("input[name=new-field]").removeClass("is-invalid"),e.val(t),e.parents("section").first().find("input[type=radio][value="+i+"]").prop("checked",!0),$("#modalFieldEditor").modal("hide"))})).fail((function(e){o.css("cursor","default")}))):$("#modalFieldEditor").modal("hide")}))}))}});