!function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=2)}([,,function(e,t,o){e.exports=o(3)},function(e,t){$(document).ready((function(){var e=!1,t=parseInt($('[name="type_id"]').val());function o(){$(".categoriex").click((function(){if(confirm("Étes-vous sûr?")){var e=$(this);categorie_id=$(this).attr("data-id"),$.ajax({method:"delete",url:"/coulisses/categorie/"+categorie_id,data:{_token:$('[name="csrf-token"]').attr("content")}}).done((function(t){e.parents("tr").first().remove()})).fail((function(e){console.log(e),alert("Connexion impossible pour supprimer la catégorie.")}))}}))}function n(){$(".categoried").click((function(){var e=$(this);categorie_id=$(this).attr("data-id"),$.ajax({method:"post",url:"/coulisses/categorie/"+categorie_id+"/detach",data:{_token:$('[name="csrf-token"]').attr("content"),idType:t}}).done((function(t){e.parents("tr").first().remove()})).fail((function(e){console.log(e),alert("Connexion impossible pour détacher la catégorie.")}))}))}function i(){$(".categorieo").click((function(){$(this);categorie_id=$(this).attr("data-id"),$.ajax({method:"get",url:"/coulisses/categorie/"+categorie_id+"/edit"}).done((function(t){$("#modalCategorie").modal("show"),$('[name="name"]').val(t),e=categorie_id,$("#title-ajout").html("Modifier une catégorie")})).fail((function(e){console.log(e),alert("Connexion impossible pour éditer la catégorie.")}))}))}$('[name="choose_cat"]').popsuggest({placement:"left",dataUrl:"/coulisses/categorie_suggest/"+t,chainLength:1,rows:5,addData:{_token:$('[name="csrf-token"]').attr("content")}}).on("popSelect",(function(){var e;e=this.value,$.ajax({method:"post",url:"/coulisses/categorie/"+t+"/attach",data:{_token:$('[name="csrf-token"]').attr("content"),name:e},dataType:"json"}).done((function(e){e.error?alert(e.error):$("#categories-container").load("/coulisses/categorie?type_id="+t,(function(){i(),n(),o()}))})).fail((function(e){console.log(e),alert("Connexion impossible pour associer la catégorie.")})),this.value=""})),$("#ajout-categorie").click((function(){if(e)var a="put",r="/coulisses/categorie/"+e;else a="post",r="/coulisses/categorie";$.ajax({method:a,url:r,data:{_token:$('[name="csrf-token"]').attr("content"),name:$('[name="name"]').val(),type_id:t},dataType:"json"}).done((function(a){$("#categories-container").load("/coulisses/categorie?type_id="+t,(function(){i(),n(),o()})),$("#modalCategorie").modal("hide"),e=!1,$("#title-ajout").html("Ajouter une catégorie"),$("input").removeClass("is-invalid")})).fail((function(t){$.each(t.responseJSON.errors,(function(e,t){t+"\n";var o="input[name="+e+"]";$(o).addClass("is-invalid"),$(o).next().html(t)})),e=!1}))})),$(".close").click((function(){e=!1,$("#title-ajout").html("Ajouter une catégorie"),$("input").removeClass("is-invalid")})),o(),n(),i()}))}]);